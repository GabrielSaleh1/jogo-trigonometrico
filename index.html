<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>RPG Trigonom√©trico ‚Äì Jornada Guiada</title>
<style>
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    color: #fff;
    background: radial-gradient(circle at top, #0f0c29, #302b63, #24243e);
    overflow-x: hidden;
  }

  h1, h2, h3, p, span, div {
    color: #fff;
    font-weight: 600;
  }

  button {
    background: linear-gradient(90deg, #a21caf, #f472b6);
    border: none;
    color: white;
    font-weight: bold;
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
    margin-top: 10px;
  }

  button:hover {
    background: linear-gradient(90deg, #be185d, #ec4899);
  }

  .container {
    max-width: 900px;
    margin: 40px auto;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.15);
  }

  .dialogo {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 15px;
    margin-bottom: 15px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .dialogo span {
    font-size: 2em;
  }

  input[type="range"] {
    width: 100%;
    accent-color: #f472b6;
  }

  svg text {
    font-weight: bold;
    fill: #fff;
    text-shadow: 1px 1px 4px #000;
  }

  .warn {
    background: rgba(255, 0, 0, 0.2);
    border-left: 4px solid red;
    padding: 10px;
    border-radius: 10px;
    margin-top: 10px;
  }

  .star-bg {
    position: fixed;
    inset: 0;
    z-index: -1;
    background: radial-gradient(circle at top, #1a103d, #0a0225);
    overflow: hidden;
  }

  .star {
    position: absolute;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
  }
</style>
</head>
<body>
<div class="star-bg" id="stars"></div>
<div class="container">
  <h2 id="titulo">RPG Trigonom√©trico ‚Äî Jornada Guiada</h2>
  <div class="dialogo">
    <span>ü™ê</span>
    <p id="mensagem"></p>
  </div>

  <div id="warn" class="warn" style="display:none;"></div>

  <div id="conteudo"></div>

  <div style="text-align:right;">
    <button id="botao">Avan√ßar</button>
  </div>
</div>

<script>
const mensagem = document.getElementById("mensagem");
const conteudo = document.getElementById("conteudo");
const botao = document.getElementById("botao");
const warn = document.getElementById("warn");
const titulo = document.getElementById("titulo");

const fases = ["intro", "angulos", "irmaos", "radianos", "coords"];
let faseAtual = 0;
let indice = 0;
let angulo = 0;
let descobertos = [];

const seqNotaveis = [30, 45, 60, 90];
const irmaos = { 30:150, 45:135, 60:120, 90:270 };

function setTexto(txt) { mensagem.innerHTML = txt; }

function estrelas() {
  const s = document.getElementById("stars");
  for (let i=0; i<100; i++) {
    const star = document.createElement("div");
    star.className = "star";
    star.style.width = star.style.height = Math.random()*2+"px";
    star.style.top = Math.random()*100+"%";
    star.style.left = Math.random()*100+"%";
    s.appendChild(star);
  }
}
estrelas();

function toRad(d) { return (d*Math.PI)/180; }

function renderCirculo() {
  conteudo.innerHTML = "";
  const svg = document.createElementNS("http://www.w3.org/2000/svg","svg");
  svg.setAttribute("width","360");
  svg.setAttribute("height","360");
  const cx=180, cy=180, R=130;
  
  const circle = document.createElementNS("http://www.w3.org/2000/svg","circle");
  circle.setAttribute("cx",cx); circle.setAttribute("cy",cy);
  circle.setAttribute("r",R);
  circle.setAttribute("stroke","#fff");
  circle.setAttribute("fill","none");
  svg.appendChild(circle);

  descobertos.forEach((deg)=>{
    const r=toRad(deg);
    const x=cx+R*Math.cos(r);
    const y=cy-R*Math.sin(r);
    const c=document.createElementNS("http://www.w3.org/2000/svg","circle");
    c.setAttribute("cx",x);
    c.setAttribute("cy",y);
    c.setAttribute("r",8);
    c.setAttribute("fill","#34d399");
    svg.appendChild(c);
    const t=document.createElementNS("http://www.w3.org/2000/svg","text");
    t.setAttribute("x",x+10);
    t.setAttribute("y",y-8);
    t.textContent=deg+"¬∞";
    svg.appendChild(t);
  });

  const linha=document.createElementNS("http://www.w3.org/2000/svg","line");
  const xr=cx+R*Math.cos(toRad(angulo));
  const yr=cy-R*Math.sin(toRad(angulo));
  linha.setAttribute("x1",cx); linha.setAttribute("y1",cy);
  linha.setAttribute("x2",xr); linha.setAttribute("y2",yr);
  linha.setAttribute("stroke","#f472b6");
  svg.appendChild(linha);

  conteudo.appendChild(svg);

  const input=document.createElement("input");
  input.type="range"; input.min=0; input.max=360;
  input.value=angulo;
  input.oninput=e=>{
    angulo=parseInt(e.target.value);
    verificar();
    renderCirculo();
  };
  conteudo.appendChild(input);

  const btn=document.createElement("button");
  btn.textContent="Confirmar posi√ß√£o";
  btn.onclick=confirmar;
  conteudo.appendChild(btn);
}

function verificar(){
  const target = faseAtual===1 ? seqNotaveis[indice] : irmaos[seqNotaveis[indice]];
  const dif = Math.abs(angulo-target);
  if(dif<5) setTexto("‚ú® Quase l√°! Ajuste fino...");
  else if(dif<15) setTexto("Quase entrando na √≥rbita!");
  else if(dif<45) setTexto("Longe ainda, continue girando...");
  else setTexto("Estamos longe... gire mais.");

  warn.style.display="none";
  if(angulo>90 && angulo<270) warn.style.display="block", warn.innerHTML="‚ö†Ô∏è Cosseno negativo (lado esquerdo)";
  if(angulo>180 && angulo<360) warn.style.display="block", warn.innerHTML+="<br>‚ö†Ô∏è Seno negativo (abaixo do eixo x)";
}

function confirmar(){
  const alvo = faseAtual===1 ? seqNotaveis[indice] : irmaos[seqNotaveis[indice]];
  if(Math.abs(angulo-alvo)<=5){
    if(!descobertos.includes(alvo)) descobertos.push(alvo);
    setTexto(`Excelente! Voc√™ encontrou ${alvo}¬∞!`);
    indice++;
    if(faseAtual===1 && indice>=seqNotaveis.length){
      setTimeout(()=>{
        faseAtual=2; indice=0;
        setTexto("Agora cada √¢ngulo tem um irm√£o! Vamos encontr√°-los!");
        renderCirculo();
      },800);
    } else if(faseAtual===2 && indice>=seqNotaveis.length){
      faseAtual=3;
      mostrarRadianos();
    }
  } else {
    setTexto("Ainda n√£o. Tente ajustar mais!");
  }
}

function mostrarRadianos(){
  titulo.textContent="Cap√≠tulo 3 ‚Äî A tradu√ß√£o em radianos";
  conteudo.innerHTML="";
  setTexto("<b>Como eu tinha dito para voc√™...</b><br>Os √¢ngulos tamb√©m t√™m outro nome: chamamos eles de <b>radianos</b>!<br>Um radiano √© uma forma de medir √¢ngulos usando o pr√≥prio raio do c√≠rculo.<br>Imagine que o raio se enrola ao redor do c√≠rculo ‚Äî quando o comprimento do arco √© igual ao do raio, temos <b>1 radiano</b>.<br>‚ú® œÄ radianos equivalem exatamente a 180¬∞!");
  
  const svg=document.createElementNS("http://www.w3.org/2000/svg","svg");
  svg.setAttribute("width","360");
  svg.setAttribute("height","360");
  const cx=180,cy=180,R=130;
  const angulos=[30,45,60,90,120,135,150,180,210,225,240,270];
  angulos.forEach((deg)=>{
    const r=toRad(deg);
    const x=cx+R*Math.cos(r);
    const y=cy-R*Math.sin(r);
    const c=document.createElementNS("http://www.w3.org/2000/svg","circle");
    c.setAttribute("cx",x); c.setAttribute("cy",y);
    c.setAttribute("r",6); c.setAttribute("fill","#34d399");
    svg.appendChild(c);
    const t=document.createElementNS("http://www.w3.org/2000/svg","text");
    t.setAttribute("x",x+10); t.setAttribute("y",y-6);
    t.textContent=`${deg}¬∞ = ${(deg/180).toFixed(2)}œÄ rad`;
    svg.appendChild(t);
  });
  conteudo.appendChild(svg);
  const btn=document.createElement("button");
  btn.textContent="Continuar para coordenadas";
  btn.onclick=mostrarCoords;
  conteudo.appendChild(btn);
}

function mostrarCoords(){
  titulo.textContent="Cap√≠tulo 4 ‚Äî As coordenadas do cosmos";
  setTexto("<b>Cada ponto do nosso c√≠rculo tem uma coordenada especial</b> ‚Äî o <b>cosseno</b> (x) e o <b>seno</b> (y).<br>O cosseno mostra quanto anda no eixo x e o seno quanto sobe no eixo y.<br>Como o raio √© 1, os valores ficam entre -1 e 1.<br>Assim, cada √¢ngulo revela onde vive no c√≠rculo!");
  conteudo.innerHTML="<p>üåü <b>C√≠rculo restaurado!</b> Voc√™ dominou √¢ngulos, irm√£os, radianos e coordenadas. Parab√©ns!</p>";
  botao.style.display="none";
}

botao.onclick=()=>{
  if(faseAtual===0){
    faseAtual=1;
    titulo.textContent="Cap√≠tulo 1 ‚Äî √Çngulos not√°veis";
    setTexto("Vamos reconstruir o c√≠rculo! Gire at√© o √¢ngulo certo!");
    renderCirculo();
  }
};
</script>
</body>
</html>
